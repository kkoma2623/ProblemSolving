(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1031:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var s=a(57),n=a.n(s),i=a(299),o=a(183);var c=new WeakMap,r=new WeakSet;class l{constructor(){r.add(this),c.set(this,{writable:!0,value:new Set})}add(t){const e=i.a.getInstance(t);return n()(this,c).has(e)||(n()(this,c).add(e),function(t,e,a){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return a}(this,r,d).call(this,e)),e}flush(){for(const{audio:t}of n()(this,c))t.pause(),t.currentTime=0;n()(this,c).clear()}}async function d(t){try{await t.play()}catch(e){if(!(e instanceof Error&&"NotAllowedError"===e.name))throw e;{const e=new o.a;document.addEventListener("click",e.resolve,{once:!0}),await e.promise,await t.play()}}await t.ended,n()(this,c).delete(t)}let u;const p=()=>({chatAudiosPlayer:u||(u=new l)})},1542:function(t,e,a){"use strict";var s=a(0),n=a(680),i=a(1031),o=a(299),c=a(658),r=a(898),l=a(17),d=a(958),u=a(2),p=Object(s.d)({name:"TestNotificationsModalAudioPlayer",components:{ProgressDots:r.a,SvgIcon:l.a},props:{chatMessage:{type:Object,default:null},testId:{type:Number,required:!0},testNotification:{type:d.a,default:null}},setup(t){const e=Object(u.a)(),a=Object(s.A)(),{chatAudiosPlayer:r}=Object(i.a)(),{notificationAudiosPlayer:l}=Object(c.a)(),{audioRef:d,currentTime:p,duration:m,format:h,playing:w}=Object(o.b)(),f=Object(s.w)(!1);return{audioRef:d,currentTime:p,duration:m,fetching:f,format:h,handleClickControl:async()=>{const e=Object(s.z)(d);if(!e||e.paused)try{f.value=!0;const{chatMessage:e,testId:a,testNotification:s}=t;if(e){const t=await Object(n.b)(a,e),{audio:s}=r.add(t);d.value=s}else if(s){const t=await Object(n.c)(a,s),{audio:e}=l.add(t);d.value=e}}finally{f.value=!1}else e.pause()},handleClickProgressBar:({currentTarget:t,offsetX:e})=>{const a=Object(s.z)(d);if(!a||!Number.isFinite(a.duration)||!(t instanceof HTMLDivElement))return;const{clientWidth:n}=t;a.currentTime=p.value=a.duration*e/n},I18n:e,playing:w,style:a}}}),m=a(3293),h=a.n(m),w=a(1);var f=Object(w.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.style.container},[a("span",{class:t.style.time},[t._v("\n    "+t._s(t.audioRef?t.format(t.currentTime):"--:--")+"\n  ")]),t._v(" "),a("div",{class:t.style.progressBar,on:{click:t.handleClickProgressBar}},[a("div",{class:t.style.track}),t._v(" "),a("div",{class:t.style.progress,style:{width:t.duration?Math.round(1e3*t.currentTime/t.duration)/10+"%":0}})]),t._v(" "),a("button",{class:t.style.control,on:{click:t.handleClickControl}},[t.fetching?a("ProgressDots",{attrs:{"transparent-background":""}}):a("SvgIcon",{attrs:{name:t.playing?"ic-player_pause":"ic-player_play","html-class":"ic-16 ic-white"}})],1)])}),[],!1,(function(t){this.$style=h.a.locals||h.a}),null,null);e.a=f.exports},1555:function(t,e,a){"use strict";var s=a(0),n=a(1031),i=a(299),o=a(898),c=a(17),r=a(680),l=Object(s.d)({name:"ChatAudioBubble",components:{ProgressDots:o.a,SvgIcon:c.a},props:{chatMessage:{type:Object,required:!0},testId:{type:Number,required:!0},theme:{type:String,default:"normal"}},setup(t){const e=Object(s.A)(),{audioRef:a,currentTime:o,duration:c,format:l,playing:d}=Object(i.b)(),u=Object(s.w)(!1),p=r.a.subscribe((()=>{const e=r.a.createChatAudioGetObjectPresignedUrlCacheKey(t.chatMessage);return(t,s)=>{e===t&&(a.value=i.a.getInstance(s).audio)}})());return Object(s.r)((()=>{p()})),{audioRef:a,currentTime:o,duration:c,fetching:u,format:l,handleClickControl:async()=>{const e=Object(s.z)(a);if(!e||e.paused)try{u.value=!0;const{testId:e,chatMessage:s}=t,i=await Object(r.b)(e,s),{chatAudiosPlayer:o}=Object(n.a)();o.flush();const c=o.add(i);a.value||(a.value=c.audio)}finally{u.value=!1}else e.pause()},playing:d,style:e}}}),d=a(3296),u=a.n(d),p=a(1);var m=Object(p.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{class:[t.style.container,t.style[t.theme]],attrs:{type:"button"},on:{click:t.handleClickControl}},[t.audioRef&&t.duration?a("div",{class:t.style.progressBar,style:{width:t.duration?Math.round(1e3*t.currentTime/t.duration)/10+"%":0}}):t._e(),t._v(" "),a("div",{class:t.style.control},[t.fetching?a("ProgressDots",{attrs:{"transparent-background":""}}):a("SvgIcon",{attrs:{name:t.playing?"ic-player_pause":"ic-player_play","html-class":["ic-16","proctor-mine"===t.theme&&"ic-white"].filter(Boolean).join(" ")}})],1),t._v(" "),a("span",{class:t.style.time},[t._v("\n    "+t._s(t.audioRef?t.format(t.currentTime):"--:--")+"\n  ")])])}),[],!1,(function(t){this.$style=u.a.locals||u.a}),null,null);e.a=m.exports},3293:function(t,e,a){t.exports={"xs-down":'"max-width: 320px"',"sm-down":'"max-width: 575px"',"md-down":'"max-width: 767px"',"lg-down":'"max-width: 991px"',"xl-down":'"max-width: 1199px"',"xxl-down":'"max-width: 1599px"',"xxxl-down":'"max-width: 1999px"',danger:"#f44336",normal:"#98a8b9",success:"#4caf50",warning:"#ff9800",container:"jVyoK9sM50yIPNkM-YQcd",time:"_1WXsfOpBQ5LGVm4Q5b8tOD",progressBar:"_3jryhE9Ix6DO6S6QspfRwx",track:"HeWpTPEk5agcqpZIDQUp1",progress:"_2IfnjW45HsDqmk3GqISv8W",control:"_1tpudi409j5ROmcEZG1bi3"}},3296:function(t,e,a){t.exports={"xs-down":'"max-width: 320px"',"sm-down":'"max-width: 575px"',"md-down":'"max-width: 767px"',"lg-down":'"max-width: 991px"',"xl-down":'"max-width: 1199px"',"xxl-down":'"max-width: 1599px"',"xxxl-down":'"max-width: 1999px"',danger:"#f44336",normal:"#98a8b9",success:"#4caf50",warning:"#ff9800",container:"_3S0UJhRKDtiw-C0D8Nr1qM",progressBar:"_1_-KvnuIT7WLuwUEAIQ0CW",control:"_1nJBxPGCu16muiW7had_A0",time:"_1aIEdihStiWgEaKg3UBFnO","proctor-mine":"_3Ex0ng0RCL8D41lq3MNxnR","proctor-other":"esgaNshGrvkbbpFv-oPNv","proctor-third":"_177wu_LrrM6wETGvzJF8KQ"}},4110:function(t,e,a){"use strict";var s=a(0),n=Object(s.d)({props:{date:{type:String,required:!0}}}),i=a(4162),o=a.n(i),c=a(1);var r=Object(c.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:[t.$style["notice-date"]]},[a("hr"),t._v(" "),a("span",{staticClass:"mx-2"},[t._v(t._s(t.date))]),t._v(" "),a("hr")])}),[],!1,(function(t){this.$style=o.a.locals||o.a}),null,null);e.a=r.exports},4120:function(t,e,a){"use strict";var s=a(0),n=a(1542),i=a(4110),o=a(2),c=a(85),r=a(11),l=a(9),d=Object(s.d)({name:"ChallengeToolbarNoticeModalBody",components:{AudioPlayer:n.a,DateDisplay:i.a},setup(){const t=Object(o.a)(),e=Object(l.a)(),a=Object(r.a)(),{notificationsByDate:n,setViewed:i}=Object(c.c)(),d=Object(s.a)((()=>e.state.test.isChatting)),u=Object(s.a)((()=>e.state.test.id)),p=Object(s.a)((()=>e.state.testToken.username));return Object(s.p)((()=>{i()})),{I18n:t,isChatting:d,notificationsByDate:n,style:a,testId:u,username:p}}}),u=a(4163),p=a.n(u),m=a(1);var h=Object(m.a)(d,(function(){var t,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{class:(t={},t[e.style.notificationsWrapper]=!e.isChatting,t[e.style.chatNotificationsWrapper]=e.isChatting,t)},[e.notificationsByDate.size>0?e._l(e.notificationsByDate.keys(),(function(t){return s("div",{key:t},[s("DateDisplay",{attrs:{date:t}}),e._v(" "),e._l(e.notificationsByDate.get(t),(function(a,n){var i,o;return s("div",{key:n,class:[e.style.noticeWrapper,"py-3",(i={},i[e.style.lastNotice]=e.notificationsByDate.get(t).length-1===n,i)]},[a.title?s("div",[s("div",{class:[e.style.noticeType,"mb-2"]},[s("div",{class:e.style.announcement},[s("div",{class:[e.style.typeIconWrapper,"mr-2",(o={},o[e.style.hasNotificationAudio]=a.hasNotificationAudio,o)]},[a.hasNotificationAudio?s("SvgIcon",{attrs:{name:"ic-announcement-voice","html-class":"ic-12"}}):s("SvgIcon",{attrs:{name:"ic-campaign-16","html-class":"ic-12"}})],1),e._v("\n              "+e._s(e.I18n.t(a.hasNotificationAudio?"test.spa.notice_audio":"test.spa.notice"))+"\n            ")]),e._v(" "),s("span",{class:e.style.date},[e._v(e._s(a.createdAt))])]),e._v(" "),s("div",{class:[e.style.noticeTitle,"mb-1"]},[e._v("\n            "+e._s(a.title)+"\n          ")]),e._v(" "),s("div",{class:e.style.noticeContent},[e._v("\n            "+e._s(a.content)+"\n          ")]),e._v(" "),a.hasNotificationAudio?s("AudioPlayer",{class:e.style.player,attrs:{"test-id":e.testId,"test-notification":a}}):e._e()],1):s("div",[s("div",{class:[e.style.noticeType,"mb-2"]},[s("div",{class:e.style.proctor},[s("div",{class:[e.style.proctorIconWrapper,"mr-2"]},[s("SvgIcon",{attrs:{name:"ic-interview-fill-16","html-class":"ic-12"}})],1),e._v("\n              "+e._s(e.I18n.t("test.spa.proctor_message"))+"\n            ")]),e._v(" "),s("span",{class:e.style.date},[e._v(e._s(a.createdAt))])]),e._v(" "),s("div",{class:[e.style.noticeTitle,"mb-1"]},[e._v("\n            "+e._s(e.I18n.t("test.spa.proctor_description",{username:e.username}))+"\n          ")]),e._v(" "),s("div",{class:e.style.noticeContent},[e._v("\n            "+e._s(a.content)+"\n          ")]),e._v(" "),a.hasNotificationAudio?s("AudioPlayer",{class:e.style.player,attrs:{"test-id":e.testId,"test-notification":a}}):e._e()],1)])}))],2)})):s("div",{class:e.style.empty},[s("SvgIcon",{attrs:{name:"ic-inbox-message","html-class":"mb-2 ic-40"}}),e._v("\n    "+e._s(e.I18n.t("test.spa.no_announcement"))+"\n  ")],1)],2)}),[],!1,(function(t){this.$style=p.a.locals||p.a}),null,null);e.a=h.exports},4130:function(t,e,a){"use strict";var s=a(0),n=a(49),i=a(680),o=a(1031),c=a(1555),r=a(4110),l=a(2),d=a(11),u=a(9),p=Object(s.d)({name:"ChallengeToolbarDialog",components:{ChatAudioBubble:c.a,DateDisplay:r.a},props:{date:{type:String,required:!0},messages:{type:Array,required:!0}},setup(){const t=Object(l.a)(),e=Object(d.a)(),a=Object(u.a)();return{I18n:t,isMyMessage:(t,e)=>{const{testToken:s}=a.state;return s.userableId===t&&s.userableType===e},style:e,testId:Object(s.a)((()=>a.state.test.id))}}}),m=a(4275),h=a.n(m),w=a(1);var f=Object(w.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.style.dialog},[a("div",{staticClass:"mt-3"},[a("DateDisplay",{attrs:{date:t.date}})],1),t._v(" "),t._l(t.messages,(function(e){var s;return a("div",{key:e.id,class:[t.style.messageWrapper,(s={},s[t.style.mine]=t.isMyMessage(e.userableId,e.userableType),s)]},[a("div",{class:t.style.message},[e.hasChatAudio?a("span",[t._v(t._s(t.I18n.t("chat.chat_room.dialog.audio_message")))]):a("span",[t._v(t._s(e.message))])]),t._v(" "),e.hasChatAudio?a("ChatAudioBubble",{class:t.style.chatAudioBubble,attrs:{"chat-message":e,"test-id":t.testId}}):t._e(),t._v(" "),a("div",{class:t.style.time},[t._v("\n      "+t._s(e.createdAt)+"\n    ")])],1)}))],2)}),[],!1,(function(t){this.$style=h.a.locals||h.a}),null,null).exports,b=a(65),y=a.n(b),g=a(85);const x=Object(s.u)({isConnected:!1}),_=Object(s.a)((()=>x.isConnected)),v={async connected(){const t=Object(u.a)();x.isConnected=!0,await t.dispatch("testToken/setHasNewChatMessage",!0)},rejected(){},received(t){const e=y()(t,{deep:!0});switch(t.type){case"new_message":{const{message:t}=e;g.b.messages.push(t);break}}},disconnected(){}};var O=a(7),j=a(238),C=a(97),T=Object(s.d)({name:"ChallengeToolbarChattingTab",components:{Dialog:f},channels:{[O.CHANNELS.CHAT_CHANNEL]:v},props:{modal:{type:Object,default:null}},setup(t){const e=Object(l.a)(),a=Object(d.a)(),c=Object(u.a)(),r=Object(s.a)((()=>c.state.test)),p=Object(s.a)((()=>c.state.testToken)),m=Object(C.a)(),{currentTab:h,lastChatMessage:w,lastViewedChatMessage:f,messagesByDate:b,setChatViewed:y,setLastViewedChatMessage:v}=Object(g.c)(),T=Object(s.w)(""),A=Object(s.w)([]),N=Object(s.w)(null),I=async()=>{var t;await Object(s.k)();const e=A.value[A.value.length-1];if(!e)return;Array.from(null===(t=e.$el)||void 0===t?void 0:t.children).pop().scrollIntoView()};return Object(s.B)(b,(()=>{I()})),Object(s.B)(w,(async t=>{const e=Object(s.z)(f);if(t&&t.id!==(null===e||void 0===e?void 0:e.id)){const{hasChatAudio:e}=t;if(e){const{id:e}=Object(s.z)(r);if(e){const a=await Object(i.b)(e,t),{chatAudiosPlayer:s}=Object(o.a)();s.flush(),s.add(a)}}else await Object(j.b)("alarm_chat.mp3");v(t)}}),{immediate:!0}),Object(s.C)((()=>{const{id:t}=p.value;t&&m.subscribe({channel:O.CHANNELS.CHAT_CHANNEL,id:t})})),Object(s.p)((async()=>{await Object(s.k)(),y(),await I(),t.modal&&$(t.modal.$el).on("shown.bs.modal",(()=>{I()}))})),Object(s.r)((async()=>{var e;await Object(s.k)(),m.unsubscribe(O.CHANNELS.CHAT_CHANNEL),e=!1,x.isConnected=e,t.modal&&$(t.modal.$el).off("shown.bs.modal")})),{currentTab:h,dialogs:A,handleSubmit:async()=>{T.value&&r.value.id&&(await Object(n.w)({message:T.value,testId:r.value.id,token:p.value.token}),T.value="")},I18n:e,isConnected:_,message:T,messages:N,messagesByDate:b,style:a,testToken:p}}}),A=a(4276),N=a.n(A);var I=Object(w.a)(T,(function(){var t,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{class:e.style.wrapper},[s("div",{ref:"messages",class:e.style.messages},[s("div",{class:e.style.guide},[e._v("\n      "+e._s(e.I18n.t("chat.chat_room.dialog.help_message_html"))+"\n    ")]),e._v(" "),e._l(e.messagesByDate.keys(),(function(t){return s("Dialog",{key:t,ref:"dialogs",refInFor:!0,attrs:{messages:e.messagesByDate.get(t),date:t}})}))],2),e._v(" "),s("form",{class:e.style.form,on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],class:e.style.input,attrs:{disabled:!e.isConnected||!e.testToken.id,placeholder:e.I18n.t("chat.chat_room.sendbox.placeholder")},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),s("span",{class:[e.style.iconWrapper,(t={},t[e.style.active]=e.message,t)],on:{click:e.handleSubmit}},[s("SvgIcon",{attrs:{name:"ic-send","html-class":"ic-24 "+e.style.icon+" "+(!e.message||e.style.active)}})],1)])])}),[],!1,(function(t){this.$style=N.a.locals||N.a}),null,null),k=I.exports,B=a(4120),D=Object(s.d)({name:"ChallengeToolbarChattingBody",components:{NoticeModalBody:B.a,ChattingTab:k},props:{modal:{type:Object,default:null}},setup(){const t=Object(u.a)(),{isNew:e,currentTab:a,setCurrentTab:n,isNewChat:i,open:o}=Object(g.c)(),c=Object(d.a)(),r=Object(l.a)(),p=Object(s.x)(t.state.test,"isDemo");return{s:c,currentTab:a,setCurrentTab:n,TAB:g.a,isNew:e,isNewChat:i,open:o,isDemo:p,i18n:r}}}),E=a(4277),P=a.n(E);var S=Object(w.a)(D,(function(){var t,e,a=this,s=a.$createElement,n=a._self._c||s;return n("div",{class:a.s.bodyWrapper},[n("div",{class:a.s.tabWrapper},[n("div",{class:[a.s.tab,"mr-3",(t={},t[a.s.active]=a.currentTab===a.TAB.NOTICE,t)],on:{click:function(t){return a.setCurrentTab(a.TAB.NOTICE)}}},[a._v("\n      "+a._s(a.i18n.t("test.spa.notice"))+" "),a.isNew?n("span",{class:a.s.new},[a._v("N")]):a._e()]),a._v(" "),n("div",{class:[a.s.tab,(e={},e[a.s.active]=a.currentTab===a.TAB.PROCTOR_CHAT,e[a.s.disabled]=a.isDemo,e)],on:{click:function(t){!a.isDemo&&a.setCurrentTab(a.TAB.PROCTOR_CHAT)}}},[a._v("\n      "+a._s(a.i18n.t("test.spa.proctor_chat"))+" "),a.isNewChat?n("span",{class:a.s.new},[a._v("N")]):a._e()])]),a._v(" "),a.open?[a.currentTab===a.TAB.NOTICE?n("NoticeModalBody"):n("ChattingTab",{attrs:{modal:a.modal}})]:a._e()],2)}),[],!1,(function(t){this.$style=P.a.locals||P.a}),null,null);e.a=S.exports},4162:function(t,e,a){t.exports={"xs-down":'"max-width: 320px"',"sm-down":'"max-width: 575px"',"md-down":'"max-width: 767px"',"lg-down":'"max-width: 991px"',"xl-down":'"max-width: 1199px"',"xxl-down":'"max-width: 1599px"',"xxxl-down":'"max-width: 1999px"',danger:"#f44336",normal:"#98a8b9",success:"#4caf50",warning:"#ff9800","notice-date":"_3KIMRFkIm5NtaCU9MK23KT"}},4163:function(t,e,a){t.exports={"xs-down":'"max-width: 320px"',"sm-down":'"max-width: 575px"',"md-down":'"max-width: 767px"',"lg-down":'"max-width: 991px"',"xl-down":'"max-width: 1199px"',"xxl-down":'"max-width: 1599px"',"xxxl-down":'"max-width: 1999px"',danger:"#f44336",normal:"#98a8b9",success:"#4caf50",warning:"#ff9800","notifications-wrapper":"_3HXBEV_tbM3By3uXITf4uu","chat-notifications-wrapper":"_2SSOK7S2qoFKUn1pvSKmQN","notice-wrapper":"_1HnTJ2w0SB7QpbXnWKQRqu","notice-type":"_1NI396hPgoUzT12D2i5sU5",date:"_2TA2mVcodA1rflIy2moZCc",announcement:"_1Ecrkcni74lvCrqGDX-1gT","type-icon-wrapper":"_2Q4OF0IlOMSBTHEITItECW",hasNotificationAudio:"_3fzcdmvFQZU0zA96ILX0_i",proctor:"_35EcbPQwbw1fPAdq0ZcV2Q","proctor-icon-wrapper":"_29HNkZF2a6u0Aln2-UYwdA","notice-title":"_1t5JehJqRmpbIc1XjZTA0m","notice-content":"_32DKwdpo7YmzjncTZuNfaP","last-notice":"_3g23YevBy7acwZXKaksAO",player:"_319OivIQkHGriVKclkXUD8",empty:"_1y_4JDHfTjZqWJBgQ9_DQ2"}},4275:function(t,e,a){t.exports={"xs-down":'"max-width: 320px"',"sm-down":'"max-width: 575px"',"md-down":'"max-width: 767px"',"lg-down":'"max-width: 991px"',"xl-down":'"max-width: 1199px"',"xxl-down":'"max-width: 1599px"',"xxxl-down":'"max-width: 1999px"',danger:"#f44336",normal:"#98a8b9",success:"#4caf50",warning:"#ff9800","message-wrapper":"_2FTHmgrVpWwwS-D4kDcQ_P",message:"hdL-8CeNjeaEm7GobHy9i",mine:"G9Fv270BytbPnE1cYRnJh",time:"_16hdeRb2JWei32rcyUv0hU",chatAudioBubble:"_2-J0kcF8iAjH1RMEfvOkTA",dialog:"_21PuNVITRn3m0Cxi3JGqbL"}},4276:function(t,e,a){t.exports={"xs-down":'"max-width: 320px"',"sm-down":'"max-width: 575px"',"md-down":'"max-width: 767px"',"lg-down":'"max-width: 991px"',"xl-down":'"max-width: 1199px"',"xxl-down":'"max-width: 1599px"',"xxxl-down":'"max-width: 1999px"',danger:"#f44336",normal:"#98a8b9",success:"#4caf50",warning:"#ff9800",messages:"_2JoCk-5c_oWMknG6lp4l6W",wrapper:"voVbvnndN3A7Rtvm7hrfZ",guide:"DVPT7g-ucpffZZGVzGzIE","icon-wrapper":"LKmT6-H3tU44EbCSjtdV5",icon:"_2PxgUqmBncBBUMN5j8CB35",input:"l9ypcrIgL7of2y9ZtbO4I",active:"_3tBFg_z8montxRcNzEyG3g",form:"IOvmlpo6hZfimzASnR14S"}},4277:function(t,e,a){t.exports={"xs-down":'"max-width: 320px"',"sm-down":'"max-width: 575px"',"md-down":'"max-width: 767px"',"lg-down":'"max-width: 991px"',"xl-down":'"max-width: 1199px"',"xxl-down":'"max-width: 1599px"',"xxxl-down":'"max-width: 1999px"',danger:"#f44336",normal:"#98a8b9",success:"#4caf50",warning:"#ff9800","body-wrapper":"_20z0aRoofsr7fFtIx0unrC","tab-wrapper":"AmuUnbmgS-7h9dPxjVAzI",active:"_1gACgCILWZT_Q2F_4tPgLb",disabled:"_27BTSEnW1HSZfCQVeIZ1tN",tab:"_2cDc_r6Xi_uEZ9dft6pRmY",new:"_24FxlWkp8NPapo25rF4MIz"}},680:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return l}));var s=a(89),n=a.n(s);const i=async(t,e)=>{const a=l.createChatAudioGetObjectPresignedUrlCacheKey(e);if(l.has(a)){const t=l.get(a),{isExpiredPresignedUrl:e}=l;if(!e(t))return t}const{data:{url:s}}=await n.a.get(["/api/tests",t,"chat_messages",e.id,"file_url"].join("/"));return l.set(a,s).notify(a,s),s},o=async(t,e)=>{const{type:a}=e,s=(a.includes("webm")?".webm":a.includes("mp4")&&".aac")||".webm",{data:{url:i}}=await n.a.post(`/api/tests/${t}/chat_messages/create_audio_upload_url`,{ext:s});await n.a.put(i,e,{headers:{"content-type":e.type}});const{pathname:o}=new URL(i);return o},c=async(t,e)=>{const{__typename:a="TestNotification",id:s}=e,i=l.createNotificationAudioGetObjectPresignedUrlCacheKey({__typename:a,id:s});if(l.has(i)){const t=l.get(i),{isExpiredPresignedUrl:e}=l;if(!e(t))return t}const{data:{url:o}}=await n.a.get(["/api/v1/tests",t,"TestNotification"===a?"test_notifications":"TestNotificationSchedule"===a&&"test_notification_schedules",s,"audio_url"].join("/"));return l.set(i,o).notify(i,o),o},r=async(t,e)=>{const{type:a}=e,s=(a.includes("webm")?".webm":a.includes("mp4")&&".aac")||".webm",{data:{url:i}}=await n.a.post(`/api/v1/tests/${t}/test_notifications/presigned_url`,{ext:s});await n.a.put(i,e,{headers:{"content-type":e.type}});const{pathname:o}=new URL(i);return o},l=Object.assign(new Map,{createChatAudioGetObjectPresignedUrlCacheKey:t=>new URLSearchParams({__typename:"ChatMessage",id:String(t.id)}).toString(),createNotificationAudioGetObjectPresignedUrlCacheKey(t){const{__typename:e,id:a}=t;return new URLSearchParams({__typename:e,id:a}).toString()},isExpiredPresignedUrl:t=>{const{searchParams:e}=new URL(t),a=(()=>{if(e.has("Expires"))return new Date(1e3*Number(e.get("Expires")));const t=e.get("X-Amz-Date"),a=e.get("X-Amz-Expires"),s=/(?<year>\d{4})(?<month>\d{2})(?<date>\d{2})T(?<hours>\d{2})(?<minutes>\d{2})(?<seconds>\d{2})Z/.exec(t||"");if(null!==s&&void 0!==s&&s.groups){const{year:t,month:e,date:n,hours:i,minutes:o,seconds:c}=s.groups;return new Date(+t,+e,+n-1,+i,+o,+c+Number(a))}return null})();return!!a&&a<new Date},notify(t,e){this.subscribers.forEach((a=>{a(t,e)}))},subscribe(t){const{subscribers:e}=this;return e.add(t),()=>e.delete(t)},subscribers:new Set})},898:function(t,e,a){"use strict";var s=a(0),n=Object(s.d)({name:"TestAudioProgressDots",props:{color:{type:String,default:null},idle:{type:Boolean},transparentBackground:{type:Boolean}},setup(){const t=1.5;return{dotRadius:t,dots:3,duration:1400,getCenterX:t=>3+4.5*t,getValues:t=>[!1].concat(Array.from({length:3}).map(((e,a)=>t<a+2))).map(Number).join(";"),primaryColor:"#0078FF",radius:12,viewBox:24}}}),i=a(1),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{viewBox:[0,0,t.viewBox,t.viewBox].join(" "),xmlns:"http://www.w3.org/2000/svg"}},[a("circle",{attrs:{cx:t.radius,cy:t.radius,r:t.radius,fill:t.transparentBackground?"transparent":t.primaryColor}}),t._v(" "),t._l(t.dots,(function(e){return a("circle",{key:e,attrs:{cx:t.getCenterX(e),cy:t.radius,r:t.dotRadius,fill:t.color||"white","fill-opacity":t.idle&&!t.color?.4:1}},[t.idle?t._e():a("animate",{attrs:{attributeName:"fill-opacity",values:t.getValues(e),dur:t.duration+"ms",repeatCount:"indefinite"}})])}))],2)}),[],!1,null,null,null);e.a=o.exports},958:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));class s{constructor(t,e){const{__typename:a,id:s,title:n,content:i,hasNotificationAudio:o,sendAt:c,failed:r=!1}=t;Object.assign(this,{__typename:a,id:s,title:n,content:i,hasNotificationAudio:o||!1,sendAt:c?new Date(c):new Date,failed:r,cursor:e||null})}get status(){const{__typename:t,failed:e}=this;return("TestNotification"===t?"sent":"TestNotificationSchedule"===t&&!e&&"scheduled")||"error"}static new(t,e){return new s(t,e)}}}}]);
//# sourceMappingURL=29-063bec2a10cdf2472da9.chunk.js.map